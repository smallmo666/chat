# SmallMo Chat V5.0 升级方案：智能分析工作台

基于当前项目基础，我为您构思了一套极具实用性与创新性的升级方案，旨在将项目从一个“对话框”升级为全功能的“智能分析工作台”。

## 1. 功能层面：生成式仪表盘 (Generative Dashboard)
目前系统是“阅后即焚”的流式对话，有价值的图表容易流失。
*   **创新点**: 让 AI 成为仪表盘搭建者。用户不再需要手动拖拽图表，而是通过自然语言指令（如“创建一个包含日活、留存和转化率的监控大盘”）自动生成完整的 Dashboard。
*   **实现**:
    *   新增 `Dashboard` 实体与页面，支持 Grid 栅格布局。
    *   在聊天窗口的图表卡片增加“添加到仪表盘”按钮。
    *   Agent 具备 `create_dashboard` 工具，可一次性生成包含多个图表的页面布局。

## 2. 架构层面：业务知识库 RAG (Business Knowledge RAG)
数据库 Schema 往往无法涵盖复杂的业务逻辑（例如：“高价值用户”的定义是什么？“ROI”怎么算？）。
*   **创新点**: 引入轻量级向量检索（RAG），让 AI “听懂行话”。
*   **实现**:
    *   **知识管理**: 新增“业务知识库”页面，用户可以录入术语（如 `GMV = 订单金额 - 退款金额`）。
    *   **向量检索**: 在 workflow 中引入 `RetrieveKnowledge` 节点，在生成 SQL 前先检索相关的业务定义，注入到 Prompt 中，显著提升 SQL 准确率。

## 3. 交互层面：多源文件分析 (File Analysis)
打破仅支持数据库的限制，支持“随手分析”。
*   **创新点**: 拖拽 Excel/CSV 文件直接对话分析。
*   **实现**:
    *   **前端**: 聊天框支持文件拖拽上传。
    *   **后端**: 自动将 CSV 加载为 `SQLite` 内存数据库或 `Pandas DataFrame`。
    *   **融合**: 用户可以要求 AI 跨数据源分析（例如：“把上传的 Excel 预算表和数据库里的实际销售额做对比”）。

---

## 推荐实施路径 (MVP)

鉴于工作量，建议优先实施 **"业务知识库 RAG"** 和 **"生成式仪表盘"** 的基础功能。这将极大提升系统的专业度和用户粘性。

如果您同意，我将先着手实现 **"业务知识库 (RAG)"** 模块，因为它能直接提升当前核心 Text-to-SQL 功能的准确率，且改动主要集中在后端 Workflow。
